<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="{{ csrf_token }}">
    <title>Seleccionar Conjunto</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/restricciones.css' %}">
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
</head>

<body>
    {% if messages %}
    <div class="message-container" role="alert">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </div>
    {% endif %}

    {% if form.non_field_errors %}
    <div class="error-container" role="alert">
        {{ form.non_field_errors }}
    </div>
    {% endif %}

    <form method="POST" id="selectConjuntoForm" action="{% url 'accounts:select_conjunto' %}">
        {% csrf_token %}
        <div class="container">
            <div class="form">
                <div class="sign-in-section">
                    <h6>< Kislev /></h6>
                    <h1>Seleccione Conjunto</h1>
                    <p>Se encontraron varios conjuntos asociados a su cédula. Por favor, seleccione el conjunto al que desea ingresar:</p>

                    <div class="form-field">
                        <label for="id_conjunto">Conjunto Residencial:</label>
                        {{ form.conjunto }}
                        {% if form.conjunto.errors %}
                        <div class="error" role="alert">{{ form.conjunto.errors }}</div>
                        {% endif %}
                    </div>

                    <div class="form-field">
                        <input type="submit" id="submit-button" class="btn btn-signin" value="Continuar">
                    </div>

                    <div class="form-options">
                        <a href="{% url 'accounts:login' %}">Volver al inicio de sesión</a>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <script>
        // Función para manejar mensajes
        function handleMessages() {
            const messages = document.querySelectorAll('.message-container, .error-container');
            messages.forEach((message) => {
                message.style.animation = 'slideIn 0.3s ease-out forwards';
                
                setTimeout(() => {
                    message.style.animation = 'slideOut 0.3s ease-out forwards';
                    setTimeout(() => {
                        message.remove();
                    }, 300);
                }, 3000);
            });
        }

        // Manejar la carga inicial de mensajes
        window.addEventListener('load', handleMessages);
    </script>
</body>
</html>